"use strict";(self.webpackChunksimple_draw_app=self.webpackChunksimple_draw_app||[]).push([[112],{6112:function(e,t,n){n.r(t),n.d(t,{default:function(){return yt}});var a=n(2791);function r(e){var t=e(),n=(0,a.useState)(t)[1];return(0,a.useEffect)((function(){var a=e();if(t===a)return e.onNextChange(n);n(a)}),[t]),t}var o="MainPage_canvasWrapper__F2OSV",i="MainPage_toolsWrapper__+DR-6",c="MainPage_tool__Xr-HD",l="MainPage_selected__IXmX+",s="MainPage_toolSettingsWrapper__jMDf1",u="MainPage_toolSettingsGroup__+gBnY",d="MainPage_oneParamGroup__pSEF-",m="MainPage_downloadBtnContainer__OkGia",v=n(1413),g=n(3433),f="Canvas_canvas__sqZ7X",p=n(9439),h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.fillStyle=n,e.strokeStyle=n,e.beginPath(),e.moveTo.apply(e,(0,g.Z)(t[t.length-1])),t.forEach((function(t){var n=(0,p.Z)(t,2),a=n[0],r=n[1];e.lineTo(a,r)})),a?e.fill():e.stroke(),e.closePath()},x=function(e){return e%360*Math.PI/180},y=function(e,t,n,a){return[e*a-t*n,e*n+t*a]},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.map((function(e){var a=(0,p.Z)(e,2),r=a[0],o=a[1];return[t+r,n+o]}))},j=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"#000000",c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];e.fillStyle=i,e.strokeStyle=i;for(var l=x(o),s=x(360/r),u=[],d=0;d<r;d++)u.push(y(0,a,Math.sin(l),Math.cos(l))),l+=s;u=b(u,t,n),h(e,u,i,c)},Z=function(e,t,n){j(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,4,(arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)+45,arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000000",arguments.length>6&&void 0!==arguments[6]&&arguments[6])},C=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e.fillStyle=r,e.strokeStyle=r,e.beginPath(),e.arc(t,n,a,0,2*Math.PI),o?e.fill():e.stroke()},S=n(3272),N=function(e){return e.square="square",e.circle="circle",e.triangle="triangle",e.star="star",e.regularPolygon="regularPolygon",e}({}),z=(0,S.QS)(N.square),k=(0,S.QS)([]),w=(0,S.QS)({color:"#000000",filled:!1}),E=(0,S.QS)({size:10}),O=(0,S.QS)({size:10,rotation:0}),_=(0,S.QS)({size:10,rotation:0}),P=(0,S.QS)({size:10,rotation:0,verticesNumber:5}),M=(0,S.QS)({size:10,rotation:0,verticesNumber:5}),R=(0,S.QS)([{projectId:1,authorId:1,authorName:"Greeting",commentId:1,text:"Hello! You could leave comments by right mouse click on canvas",date:"22.10.2023",time:"13:00",x:10,y:10,isOpened:!0}]),I=(0,S.QS)({isCreating:!1,text:"",x:0,y:0}),F=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000000",i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];e.fillStyle=o,e.strokeStyle=o;var c=.5773502691896258*a,l=-c/2,s=a/2,u=[[0,c],[s,l],[-s,l]];u=function(e,t){var n=x(t),a=Math.sin(n),r=Math.cos(n);return e.map((function(e){var t=(0,p.Z)(e,2),n=t[0],o=t[1];return y(n,o,a,r)}))}(u,r),u=b(u,t,n),h(e,u,o,i)},B=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"#000000",c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];e.fillStyle=i,e.strokeStyle=i;for(var l=a/2,s=o,u=x(360/r),d=u/2+o,m=[],v=0;v<r;v++)m.push(y(0,a,Math.sin(s),Math.cos(s))),m.push(y(0,l,Math.sin(d),Math.cos(d))),s+=u,d+=u;m=b(m,t,n),h(e,m,i,c)},L=function(e,t){R(R().map((function(n){return n.commentId===e?(0,v.Z)((0,v.Z)({},n),{},{isOpened:t}):n})))},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,v.Z)((0,v.Z)({},I()),{},{isCreating:!1,x:0,y:0});e&&(t.text=""),I(t)},H="canvas",G=n(184),W=function(){var e=(0,a.useRef)(null),t=r(k);console.log(t);var n=function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height),k().forEach((function(t){switch(t.type){case N.circle:C(e,t.position.x,t.position.y,t.size,t.color,t.filled);break;case N.square:Z(e,t.position.x,t.position.y,t.size,t.rotation,t.color,t.filled);break;case N.triangle:F(e,t.position.x,t.position.y,t.size,t.rotation,t.color,t.filled);break;case N.star:B(e,t.position.x,t.position.y,t.size,t.verticesNumber,t.rotation,t.color,t.filled);break;case N.regularPolygon:j(e,t.position.x,t.position.y,t.size,t.verticesNumber,t.rotation,t.color,t.filled)}}))},o=function(){var t=e.current.parentNode,a=getComputedStyle(t),r=parseInt(a.getPropertyValue("width"),10),o=parseInt(a.getPropertyValue("height"),10),i=e.current.getContext("2d");i.canvas.width=r-4,i.canvas.height=o-10,n(i)};(0,a.useEffect)((function(){o()}),[]),(0,a.useEffect)((function(){return window.addEventListener("resize",o),function(){window.removeEventListener("resize",o)}}),[]);return(0,G.jsx)("canvas",{ref:e,id:H,className:f,onClick:function(a){var r,o=e.current.getContext("2d"),i=o.canvas.getBoundingClientRect(),c={x:(a.clientX-i.left)/(i.right-i.left)*o.canvas.width,y:(a.clientY-i.top)/(i.bottom-i.top)*o.canvas.height};switch(z()){case N.circle:r=E();break;case N.square:r=O();break;case N.triangle:r=_();break;case N.star:r=P();break;case N.regularPolygon:r=M()}k([].concat((0,g.Z)(t),[(0,v.Z)((0,v.Z)({type:z(),position:{x:c.x,y:c.y}},w()),r)])),console.log(k()),n(o)},onContextMenu:function(t){t.preventDefault();var n,a,r=e.current.getContext("2d"),o=r.canvas.getBoundingClientRect(),i={x:(t.clientX-o.left)/(o.right-o.left)*r.canvas.width,y:(t.clientY-o.top)/(o.bottom-o.top)*r.canvas.height};n=i.x,a=i.y,I((0,v.Z)((0,v.Z)({},I()),{},{isCreating:!0,x:n,y:a}))}})},q=new Map([[N.circle,"\u041a\u0440\u0443\u0433"],[N.square,"\u041a\u0432\u0430\u0434\u0440\u0430\u0442"],[N.triangle,"\u0422\u0440\u0435\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a"],[N.regularPolygon,"\u041c\u043d\u043e\u0433\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a"],[N.star,"\u0417\u0432\u0435\u0437\u0434\u0430"]]),T=function(){var e=r(z),t=[];return q.forEach((function(n,a){t.push((0,G.jsx)("p",{className:c+" "+(e===a?" "+l:""),onClick:function(){z(a)},children:n},a))})),(0,G.jsxs)("div",{className:i,children:[(0,G.jsx)("p",{className:c,style:{cursor:"default"},children:(0,G.jsx)("b",{children:"\u0424\u0438\u0433\u0443\u0440\u0430: "})}),t]})},V=n(3478),Q=function(){var e=r(E),t=function(e){E((0,v.Z)((0,v.Z)({},E()),{},{size:Number(e.target.value)}))};return(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"circleSize",children:"\u0420\u0430\u0434\u0438\u0443\u0441"}),(0,G.jsx)("input",{type:"range",id:"circleSize",min:"1",max:"500",value:e.size,onChange:t}),(0,G.jsx)(V.Z,{type:"number",min:1,max:500,value:e.size,onChange:t,width:"100px"})]})},A=function(){var e=r(O),t=function(e){O((0,v.Z)((0,v.Z)({},O()),{},{size:Number(e.target.value)}))},n=function(e){O((0,v.Z)((0,v.Z)({},O()),{},{rotation:Number(e.target.value)}))};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"squareSize",children:"\u0420\u0430\u0437\u043c\u0435\u0440"}),(0,G.jsx)("input",{type:"range",min:"1",max:"500",value:e.size,onChange:t}),(0,G.jsx)(V.Z,{type:"number",id:"squareSize",min:"1",max:"500",value:e.size,onChange:t})]}),(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"squareRotation",children:"\u041f\u043e\u0432\u043e\u0440\u043e\u0442"}),(0,G.jsx)("input",{type:"range",min:"0",max:"359",value:e.rotation,onChange:n}),(0,G.jsx)(V.Z,{type:"number",id:"squareRotation",min:"0",max:"359",value:e.rotation,onChange:n})]})]})},X=function(){var e=r(_),t=function(e){_((0,v.Z)((0,v.Z)({},_()),{},{size:Number(e.target.value)}))},n=function(e){_((0,v.Z)((0,v.Z)({},_()),{},{rotation:Number(e.target.value)}))};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"squareSize",children:"\u0420\u0430\u0437\u043c\u0435\u0440"}),(0,G.jsx)("input",{type:"range",min:"1",max:"500",value:e.size,onChange:t}),(0,G.jsx)(V.Z,{type:"number",id:"triangleSize",min:"1",max:"500",value:e.size,onChange:t})]}),(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"squareRotation",children:"\u041f\u043e\u0432\u043e\u0440\u043e\u0442"}),(0,G.jsx)("input",{type:"range",min:"0",max:"359",value:e.rotation,onChange:n}),(0,G.jsx)(V.Z,{type:"number",id:"squareRotation",min:"0",max:"359",value:e.rotation,onChange:n})]})]})},Y=function(){var e=r(P),t=function(e){P((0,v.Z)((0,v.Z)({},P()),{},{size:Number(e.target.value)}))},n=function(e){P((0,v.Z)((0,v.Z)({},P()),{},{rotation:Number(e.target.value)}))},a=function(e){P((0,v.Z)((0,v.Z)({},P()),{},{verticesNumber:Number(e.target.value)}))};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"starSize",children:"\u0420\u0430\u0437\u043c\u0435\u0440"}),(0,G.jsx)("input",{type:"range",min:"1",max:"500",value:e.size,onChange:t}),(0,G.jsx)(V.Z,{type:"number",id:"starSize",min:"1",max:"500",value:e.size,onChange:t})]}),(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"starRotation",children:"\u041f\u043e\u0432\u043e\u0440\u043e\u0442"}),(0,G.jsx)("input",{type:"range",min:"0",max:"359",value:e.rotation,onChange:n}),(0,G.jsx)(V.Z,{type:"number",id:"starRotation",min:"0",max:"359",value:e.rotation,onChange:n})]}),(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"starVertices",children:"\u0412\u0435\u0440\u0448\u0438\u043d\u044b"}),(0,G.jsx)("input",{type:"range",min:"3",max:"20",value:e.verticesNumber,onChange:a}),(0,G.jsx)(V.Z,{type:"number",id:"starVertices",min:"3",max:"100",value:e.verticesNumber,onChange:a})]})]})},U=function(){var e=r(M),t=function(e){M((0,v.Z)((0,v.Z)({},M()),{},{size:Number(e.target.value)}))},n=function(e){M((0,v.Z)((0,v.Z)({},M()),{},{rotation:Number(e.target.value)}))},a=function(e){M((0,v.Z)((0,v.Z)({},M()),{},{verticesNumber:Number(e.target.value)}))};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"regularPolygonSize",children:"\u0420\u0430\u0437\u043c\u0435\u0440"}),(0,G.jsx)("input",{type:"range",min:"1",max:"500",value:e.size,onChange:t}),(0,G.jsx)(V.Z,{type:"number",id:"regularPolygonSize",min:"1",max:"500",value:e.size,onChange:t})]}),(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"regularPolygonRotation",children:"\u041f\u043e\u0432\u043e\u0440\u043e\u0442"}),(0,G.jsx)("input",{type:"range",min:"0",max:"359",value:e.rotation,onChange:n}),(0,G.jsx)(V.Z,{type:"number",id:"regularPolygonRotation",min:"0",max:"359",value:e.rotation,onChange:n})]}),(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"regularPolygonVertices",children:"\u0412\u0435\u0440\u0448\u0438\u043d\u044b"}),(0,G.jsx)("input",{type:"range",min:"3",max:"20",value:e.verticesNumber,onChange:a}),(0,G.jsx)(V.Z,{type:"number",id:"regularPolygonVertices",min:"3",max:"100",value:e.verticesNumber,onChange:a})]})]})},J=function(){var e=r(z),t=r(w),n=null;switch(e){case N.circle:n=(0,G.jsx)(Q,{});break;case N.square:n=(0,G.jsx)(A,{});break;case N.triangle:n=(0,G.jsx)(X,{});break;case N.star:n=(0,G.jsx)(Y,{});break;case N.regularPolygon:n=(0,G.jsx)(U,{})}return(0,G.jsxs)("div",{className:s,children:[(0,G.jsxs)("div",{className:u,children:[(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("label",{htmlFor:"color",children:"\u0426\u0432\u0435\u0442"}),(0,G.jsx)("input",{type:"color",id:"color",name:"color",value:t.color,onChange:function(e){w((0,v.Z)((0,v.Z)({},w()),{},{color:e.target.value}))}})]}),(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("input",{type:"checkbox",id:"filled",name:"filled",checked:t.filled,onChange:function(e){w((0,v.Z)((0,v.Z)({},w()),{},{filled:e.target.checked}))}}),(0,G.jsx)("label",{htmlFor:"filled",children:"\u0417\u0430\u043b\u0438\u0432\u043a\u0430"})]})]}),(0,G.jsx)("div",{className:u,children:n})]})},K="Commentaries_commentaryWrapper__HS0Lu",$="Commentaries_openCommentWrapper__zxi24",ee="Commentaries_buttonBar__4CetC",te="Commentaries_content__+7giD",ne="Commentaries_avatar__NAb14",ae="Commentaries_author__37+I2",re="Commentaries_textarea__Dd8OD",oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},ie=n(4291),ce=function(e,t){return a.createElement(ie.Z,(0,v.Z)((0,v.Z)({},e),{},{ref:t,icon:oe}))};ce.displayName="CommentOutlined";var le=a.forwardRef(ce),se=n(4942),ue=n(1694),de=n.n(ue),me=n(1143),ve=n(8834),ge=n(1929);var fe=n(635);var pe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,a.useRef)({}),n=function(){var e=a.useReducer((function(e){return e+1}),0);return(0,p.Z)(e,2)[1]}(),r=(0,fe.Z)();return(0,a.useEffect)((function(){var a=r.subscribe((function(a){t.current=a,e&&n()}));return function(){return r.unsubscribe(a)}}),[]),t.current},he=a.createContext("default"),xe=function(e){var t=e.children,n=e.size,r=a.useContext(he);return a.createElement(he.Provider,{value:n||r},t)},ye=he,be=n(5564),je=n(9922),Ze=n(7521),Ce=function(e){var t,n,a=e.antCls,r=e.componentCls,o=e.iconCls,i=e.avatarBg,c=e.avatarColor,l=e.avatarSizeBase,s=e.avatarSizeLG,u=e.avatarSizeSM,d=e.avatarFontSizeBase,m=e.avatarFontSizeLG,v=e.avatarFontSizeSM,g=e.borderRadius,f=e.borderRadiusLG,p=e.borderRadiusSM,h=e.lineWidth,x=e.lineType,y=function(e,t,n){var a;return a={width:e,height:e,lineHeight:"".concat(e-2*h,"px"),borderRadius:"50%"},(0,se.Z)(a,"&".concat(r,"-square"),{borderRadius:n}),(0,se.Z)(a,"".concat(r,"-string"),{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"}),(0,se.Z)(a,"&".concat(r,"-icon"),(0,se.Z)({fontSize:t},"> ".concat(o),{margin:0})),a};return(0,se.Z)({},r,Object.assign(Object.assign(Object.assign(Object.assign({},(0,Ze.Wf)(e)),(t={position:"relative",display:"inline-block",overflow:"hidden",color:c,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:i,border:"".concat(h,"px ").concat(x," transparent")},(0,se.Z)(t,"&-image",{background:"transparent"}),(0,se.Z)(t,"".concat(a,"-image-img"),{display:"block"}),t)),y(l,d,g)),(n={},(0,se.Z)(n,"&-lg",Object.assign({},y(s,m,f))),(0,se.Z)(n,"&-sm",Object.assign({},y(u,v,p))),(0,se.Z)(n,"> img",{display:"block",width:"100%",height:"100%",objectFit:"cover"}),n)))},Se=function(e){var t,n=e.componentCls,a=e.avatarGroupBorderColor,r=e.avatarGroupSpace;return(0,se.Z)({},"".concat(n,"-group"),(t={display:"inline-flex"},(0,se.Z)(t,"".concat(n),{borderColor:a}),(0,se.Z)(t,"> *:not(:first-child)",{marginInlineStart:r}),t))},Ne=(0,be.Z)("Avatar",(function(e){var t=e.colorTextLightSolid,n=e.controlHeight,a=e.controlHeightLG,r=e.controlHeightSM,o=e.fontSize,i=e.fontSizeLG,c=e.fontSizeXL,l=e.fontSizeHeading3,s=e.marginXS,u=e.colorBorderBg,d=e.colorTextPlaceholder,m=(0,je.TS)(e,{avatarBg:d,avatarColor:t,avatarSizeBase:n,avatarSizeLG:a,avatarSizeSM:r,avatarFontSizeBase:Math.round((i+c)/2),avatarFontSizeLG:l,avatarFontSizeSM:o,avatarGroupSpace:-s,avatarGroupBorderColor:u});return[Ce(m),Se(m)]})),ze=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},ke=function(e,t){var n,r,o=a.useContext(ye),i=a.useState(1),c=(0,p.Z)(i,2),l=c[0],s=c[1],u=a.useState(!1),d=(0,p.Z)(u,2),m=d[0],v=d[1],g=a.useState(!0),f=(0,p.Z)(g,2),h=f[0],x=f[1],y=a.useRef(null),b=a.useRef(null),j=(0,ve.sQ)(t,y),Z=a.useContext(ge.E_).getPrefixCls,C=function(){if(b.current&&y.current){var t=b.current.offsetWidth,n=y.current.offsetWidth;if(0!==t&&0!==n){var a=e.gap,r=void 0===a?4:a;2*r<n&&s(n-2*r<t?(n-2*r)/t:1)}}};a.useEffect((function(){v(!0)}),[]),a.useEffect((function(){x(!0),s(1)}),[e.src]),a.useEffect((function(){C()}),[e.gap]);var S,N=e.prefixCls,z=e.shape,k=void 0===z?"circle":z,w=e.size,E=void 0===w?"default":w,O=e.src,_=e.srcSet,P=e.icon,M=e.className,R=e.rootClassName,I=e.alt,F=e.draggable,B=e.children,L=e.crossOrigin,D=ze(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),H="default"===E?o:E,G=Object.keys("object"===typeof H&&H||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),W=pe(G),q=a.useMemo((function(){if("object"!==typeof H)return{};var e=fe.c.find((function(e){return W[e]})),t=H[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:P?t/2:18}:{}}),[W,H]),T=Z("avatar",N),V=Ne(T),Q=(0,p.Z)(V,2),A=Q[0],X=Q[1],Y=de()((n={},(0,se.Z)(n,"".concat(T,"-lg"),"large"===H),(0,se.Z)(n,"".concat(T,"-sm"),"small"===H),n)),U=a.isValidElement(O),J=de()(T,Y,(r={},(0,se.Z)(r,"".concat(T,"-").concat(k),!!k),(0,se.Z)(r,"".concat(T,"-image"),U||O&&h),(0,se.Z)(r,"".concat(T,"-icon"),!!P),r),M,R,X),K="number"===typeof H?{width:H,height:H,lineHeight:"".concat(H,"px"),fontSize:P?H/2:18}:{};if("string"===typeof O&&h)S=a.createElement("img",{src:O,draggable:F,srcSet:_,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&x(!1)},alt:I,crossOrigin:L});else if(U)S=O;else if(P)S=P;else if(m||1!==l){var $="scale(".concat(l,") translateX(-50%)"),ee={msTransform:$,WebkitTransform:$,transform:$},te="number"===typeof H?{lineHeight:"".concat(H,"px")}:{};S=a.createElement(me.default,{onResize:C},a.createElement("span",{className:"".concat(T,"-string"),ref:b,style:Object.assign(Object.assign({},te),ee)},B))}else S=a.createElement("span",{className:"".concat(T,"-string"),style:{opacity:0},ref:b},B);return delete D.onError,delete D.gap,A(a.createElement("span",Object.assign({},D,{style:Object.assign(Object.assign(Object.assign({},K),q),D.style),className:J,ref:j}),S))};var we=a.forwardRef(ke),Ee=n(5501),Oe=n(6662),_e=function(e){return e?"function"===typeof e?e():e:null},Pe=n(9464),Me=n(7807),Re=n(278),Ie=n(3817),Fe=n(8876),Be=function(e){var t,n=e.componentCls,a=e.popoverBg,r=e.popoverColor,o=e.width,i=e.fontWeightStrong,c=e.popoverPadding,l=e.boxShadowSecondary,s=e.colorTextHeading,u=e.borderRadiusLG,d=e.zIndexPopup,m=e.marginXS,v=e.colorBgElevated;return[(0,se.Z)({},n,Object.assign(Object.assign({},(0,Ze.Wf)(e)),(t={position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:d,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--antd-arrow-background-color":v,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"}},(0,se.Z)(t,"".concat(n,"-content"),{position:"relative"}),(0,se.Z)(t,"".concat(n,"-inner"),{backgroundColor:a,backgroundClip:"padding-box",borderRadius:u,boxShadow:l,padding:c}),(0,se.Z)(t,"".concat(n,"-title"),{minWidth:o,marginBottom:m,color:s,fontWeight:i}),(0,se.Z)(t,"".concat(n,"-inner-content"),{color:r}),t))),(0,Ie.ZP)(e,{colorBg:"var(--antd-arrow-background-color)"}),(0,se.Z)({},"".concat(n,"-pure"),(0,se.Z)({position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block"},"".concat(n,"-content"),{display:"inline-block"}))]},Le=function(e){var t=e.componentCls;return(0,se.Z)({},t,Fe.i.map((function(n){var a,r=e["".concat(n,"6")];return(0,se.Z)({},"&".concat(t,"-").concat(n),(a={"--antd-arrow-background-color":r},(0,se.Z)(a,"".concat(t,"-inner"),{backgroundColor:r}),(0,se.Z)(a,"".concat(t,"-arrow"),{background:"transparent"}),a))})))},De=function(e){var t,n=e.componentCls,a=e.lineWidth,r=e.lineType,o=e.colorSplit,i=e.paddingSM,c=e.controlHeight,l=e.fontSize,s=e.lineHeight,u=e.padding,d=c-Math.round(l*s),m=d/2,v=d/2-a,g=u;return(0,se.Z)({},n,(t={},(0,se.Z)(t,"".concat(n,"-inner"),{padding:0}),(0,se.Z)(t,"".concat(n,"-title"),{margin:0,padding:"".concat(m,"px ").concat(g,"px ").concat(v,"px"),borderBottom:"".concat(a,"px ").concat(r," ").concat(o)}),(0,se.Z)(t,"".concat(n,"-inner-content"),{padding:"".concat(i,"px ").concat(g,"px")}),t))},He=(0,be.Z)("Popover",(function(e){var t=e.colorBgElevated,n=e.colorText,a=e.wireframe,r=(0,je.TS)(e,{popoverBg:t,popoverColor:n,popoverPadding:12});return[Be(r),Le(r),a&&De(r),(0,Re._y)(r,"zoom-big")]}),(function(e){return{zIndexPopup:e.zIndexPopupBase+30,width:177}})),Ge=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},We=function(e,t,n){if(t||n)return a.createElement(a.Fragment,null,t&&a.createElement("div",{className:"".concat(e,"-title")},_e(t)),a.createElement("div",{className:"".concat(e,"-inner-content")},_e(n)))};function qe(e){var t=e.hashId,n=e.prefixCls,r=e.className,o=e.style,i=e.placement,c=void 0===i?"top":i,l=e.title,s=e.content,u=e.children;return a.createElement("div",{className:de()(t,n,"".concat(n,"-pure"),"".concat(n,"-placement-").concat(c),r),style:o},a.createElement("div",{className:"".concat(n,"-arrow")}),a.createElement(Me.Popup,Object.assign({},e,{className:t,prefixCls:n}),u||We(n,l,s)))}var Te=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Ve=function(e){var t=e.title,n=e.content,r=e.prefixCls;return t||n?a.createElement(a.Fragment,null,t&&a.createElement("div",{className:"".concat(r,"-title")},_e(t)),a.createElement("div",{className:"".concat(r,"-inner-content")},_e(n))):null},Qe=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.title,o=e.content,i=e.overlayClassName,c=e.placement,l=void 0===c?"top":c,s=e.trigger,u=void 0===s?"hover":s,d=e.mouseEnterDelay,m=void 0===d?.1:d,v=e.mouseLeaveDelay,g=void 0===v?.1:v,f=e.overlayStyle,h=void 0===f?{}:f,x=Te(e,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),y=a.useContext(ge.E_).getPrefixCls,b=y("popover",n),j=He(b),Z=(0,p.Z)(j,2),C=Z[0],S=Z[1],N=y(),z=de()(i,S);return C(a.createElement(Oe.Z,Object.assign({placement:l,trigger:u,mouseEnterDelay:m,mouseLeaveDelay:g,overlayStyle:h},x,{prefixCls:b,overlayClassName:z,ref:t,overlay:a.createElement(Ve,{prefixCls:b,title:r,content:o}),transitionName:(0,Pe.mL)(N,"zoom-big",x.transitionName),"data-popover-inject":!0})))}));Qe._InternalPanelDoNotUseOrYouWillBeFired=function(e){var t=e.prefixCls,n=Ge(e,["prefixCls"]),r=(0,a.useContext(ge.E_).getPrefixCls)("popover",t),o=He(r),i=(0,p.Z)(o,2),c=i[0],l=i[1];return c(a.createElement(qe,Object.assign({},n,{prefixCls:r,hashId:l})))};var Ae=Qe,Xe=n(1113),Ye=function(e){var t=a.useContext(ge.E_),n=t.getPrefixCls,r=t.direction,o=e.prefixCls,i=e.className,c=e.rootClassName,l=e.maxCount,s=e.maxStyle,u=e.size,d=n("avatar",o),m="".concat(d,"-group"),v=Ne(d),g=(0,p.Z)(v,2),f=g[0],h=g[1],x=de()(m,(0,se.Z)({},"".concat(m,"-rtl"),"rtl"===r),i,c,h),y=e.children,b=e.maxPopoverPlacement,j=void 0===b?"top":b,Z=e.maxPopoverTrigger,C=void 0===Z?"hover":Z,S=(0,Ee.Z)(y).map((function(e,t){return(0,Xe.Tm)(e,{key:"avatar-key-".concat(t)})})),N=S.length;if(l&&l<N){var z=S.slice(0,l),k=S.slice(l,N);return z.push(a.createElement(Ae,{key:"avatar-popover-key",content:k,trigger:C,placement:j,overlayClassName:"".concat(m,"-popover")},a.createElement(we,{style:s},"+".concat(N-l)))),f(a.createElement(xe,{size:u},a.createElement("div",{className:x,style:e.style},z)))}return f(a.createElement(xe,{size:u},a.createElement("div",{className:x,style:e.style},S)))},Ue=we;Ue.Group=Ye;var Je=Ue,Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},$e=function(e,t){return a.createElement(ie.Z,(0,v.Z)((0,v.Z)({},e),{},{ref:t,icon:Ke}))};$e.displayName="DeleteOutlined";var et=a.forwardRef($e),tt=n(732),nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},at=function(e,t){return a.createElement(ie.Z,(0,v.Z)((0,v.Z)({},e),{},{ref:t,icon:nt}))};at.displayName="UserOutlined";var rt=a.forwardRef(at),ot=function(e,t){(0,a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])},it=n(8261),ct=n(8229),lt=n(7309),st=it.Z.Text,ut=function(e){var t=e.isOpened,n=e.handleCancelClick,a=e.handleDeleteClick;return(0,G.jsx)(ct.Z,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439?",open:t,closable:!1,centered:!0,footer:[(0,G.jsx)(lt.ZP,{type:"dashed",onClick:n,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cancel"),(0,G.jsx)(lt.ZP,{danger:!0,onClick:a,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},"delete")],children:(0,G.jsxs)("div",{children:[(0,G.jsx)(st,{children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e"}),(0,G.jsx)("br",{})]})})},dt=function(e){var t=e.comment,n=(0,a.useRef)(null),r=(0,a.useState)(!1),o=(0,p.Z)(r,2),i=o[0],c=o[1];return ot(n,(function(){i||L(t.commentId,!1)})),(0,G.jsxs)("div",{ref:n,className:$,style:{top:t.y,left:t.x},children:[(0,G.jsxs)("div",{className:ee,children:[(0,G.jsx)(et,{style:{color:"red"},onClick:function(){return c(!0)}}),(0,G.jsx)(tt.Z,{onClick:function(){return L(t.commentId,!1)}})]}),(0,G.jsxs)("div",{className:te,children:[(0,G.jsx)(Je,{size:"small",icon:(0,G.jsx)(rt,{}),className:ne}),(0,G.jsxs)("div",{children:[(0,G.jsx)("p",{className:ae,children:t.authorName}),(0,G.jsx)("p",{children:t.text})]})]}),(0,G.jsx)(ut,{isOpened:i,handleCancelClick:function(){return c(!1)},handleDeleteClick:function(){return e=t.commentId,void R(R().filter((function(t){return t.commentId!==e})));var e}})]})},mt=function(){var e=r(R).map((function(e){return e.isOpened?(0,G.jsx)(dt,{comment:e},e.commentId):(0,G.jsx)("div",{className:K,style:{top:e.y,left:e.x},onClick:function(){return L(e.commentId,!0)},children:(0,G.jsx)(le,{})},e.commentId)}));return(0,G.jsx)(G.Fragment,{children:e})},vt=n(5583),gt=function(e){var t=e.x,n=e.y,r=e.text,o=(0,a.useRef)(null);ot(o,(function(){return D()}));return(0,G.jsx)("div",{ref:o,className:$,style:{top:n,left:t},children:(0,G.jsxs)("div",{className:te,children:[(0,G.jsx)(Je,{size:"small",icon:(0,G.jsx)(rt,{}),className:ne}),(0,G.jsxs)("div",{children:[(0,G.jsx)(vt.Z,{className:re,value:r,onChange:function(e){var t;t=e.target.value,I((0,v.Z)((0,v.Z)({},I()),{},{text:t}))}}),(0,G.jsxs)("div",{className:ee,children:[(0,G.jsx)(lt.ZP,{type:"dashed",onClick:function(){return D(!0)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,G.jsx)(lt.ZP,{type:"primary",onClick:function(){var e=I();!function(e,t,n){var a=R();R([].concat((0,g.Z)(a),[{projectId:1,authorId:1,authorName:"Guest",commentId:a[a.length-1].commentId+1,text:n,date:(new Date).toDateString(),time:(new Date).getTime().toString(),x:e,y:t,isOpened:!1}]))}(e.x,e.y,e.text),D(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})]})})},ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},pt=function(e,t){return a.createElement(ie.Z,(0,v.Z)((0,v.Z)({},e),{},{ref:t,icon:ft}))};pt.displayName="DownloadOutlined";var ht=a.forwardRef(pt),xt=function(e){return(0,G.jsx)(lt.ZP,{type:"primary",onClick:function(){var e=document.createElement("a");e.setAttribute("download","MyDrawing.png"),document.getElementById(H).toBlob((function(t){e.setAttribute("href",URL.createObjectURL(t)),e.click()}))},icon:(0,G.jsx)(ht,{}),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})},yt=function(e){var t=r(I);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(T,{}),(0,G.jsx)(J,{}),(0,G.jsxs)("div",{className:o,children:[(0,G.jsx)(W,{}),(0,G.jsx)(mt,{}),t.isCreating&&(0,G.jsx)(gt,{x:t.x,y:t.y,text:t.text})]}),(0,G.jsx)("div",{className:m,children:(0,G.jsx)(xt,{})})]})}}}]);
//# sourceMappingURL=112.4ffee429.chunk.js.map